version: '3.8'

services:
  claude-bot:
    build:
      context: .
      dockerfile: Dockerfile
    image: claude-lark:latest
    container_name: claude-bot
    restart: unless-stopped

    env_file:
      - .env

    environment:
      - SESSION_STORE_DIR=/data/claude-lark
      - TZ=Asia/Shanghai

    volumes:
      - ${LOCAL_SESSION_DIR:-~/.claude-lark}:/data/claude-lark

    # 使用 host 网络，直接访问宿主机的 claude-agent-http
    network_mode: host

    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
